var activeSubgroups,baseVideoSrc,lastActivePlayButton,spotifyApi,spotifyController,currentlyPlayedSpotify,current_id=0;async function doLoadingCrap(){var e=localStorage.getItem("content-width");if("true"==localStorage.getItem("static-leftmenu")){$("#offcanvas").removeClass("offcanvas");var t=$("#offcanvas").find(".offcanvas-header")[0];$(t).css("display","none"),$("#offcanvasSpan").removeAttr("data-bs-toggle"),$("#offcanvasSpan").css("display","none"),$("#filter_games_menu").css("display",""),$("#filter_games_menu_pinned").css("display","none"),$("#unpin-menu").css("display",""),$("#unpin-menu").parent().css("display","flex"),$("#pin-menu").prev().css("display","none"),$("#pin-menu").prev().prev().css("display","none");var a=$("#offcanvas").next().next();if(null!=e&&(a.addClass("col"),a.removeClass("col-sm-"+e)),$("#leftMenuTodaySong").css("display",""),"true"==localStorage.getItem("all-games"))if($("#all-games-div").css("overflow-y","scroll"),$("#unpin-menu").prev().css("display",""),$("#unpin-menu").prev().prev().css("display","none"),3==$("div.centerKeeper").length)$("#all-games-div").css("max-height",$("div.centerKeeper").first().height()-$("#search-games-bar").height()-$("#allgames-heading").height()+"px");else{var s=Math.floor(($("header").height()+$("div.real-page-content").height())/window.innerHeight*100/20);s<=144&&s>=36?$("#all-games-div").css("max-height",s+"vw"):s>144?$("#all-games-div").css("max-height","144vw"):s<36&&$("#all-games-div").css("max-height",$("div.parentTabs").height()+"px")}else $("#unpin-menu").prev().css("display","none"),$("#unpin-menu").prev().prev().css("display","")}else{$("#unpin-menu").css("display","none"),$("#unpin-menu").parent().css("display",""),$("#unpin-menu").prev().css("display","none"),$("#unpin-menu").prev().prev().css("display","none"),$("#filter_games_menu").css("display","none"),$("#filter_games_menu_pinned").css("display","");a=$("#offcanvas").next().next();null!=e&&(a.addClass("col-sm-"+e),a.removeClass("col")),"true"==localStorage.getItem("all-games")?($("#all-games-div").css("overflow-y",""),$("#all-games-div").css("max-height",""),$("#pin-menu").prev().css("display",""),$("#pin-menu").prev().prev().css("display","none")):($("#pin-menu").prev().css("display","none"),$("#pin-menu").prev().prev().css("display","")),$("#leftMenuTodaySong").css("display","none")}if("ontouchstart"in window){$("td.info_button").css("display","none"),$("th.info_button").css("display","none"),$("col.info_button").css("display","none"),$(".a-external-music-link").css("display","none");var n=$("td.subgroup-separator-td").attr("colspan");$("td.subgroup-separator-td").attr("colspan",n-1),$("td.info_button").css("display","none"),$("td.contextButton").css("display",""),$("th.contextButton").css("display",""),$("col.contextButton").css("display",""),$("#pin-menu").css("display","none"),$("#offcanvasSpan").text(""),$("#offcanvasSpan").prev().css("display",""),$("#moreDiv").css("position","absolute"),$(document).find("header").addClass("sticky-top")}else{$("#warnUser").css("position","absolute"),$("#warnUser").css("margin-top","1vw");var i=localStorage.getItem("icons-size");null!=i&&($(document).find("img.img-responsive-row-icon").css("max-height",i+"vw"),$(document).find("svg.img-responsive-row-icon").css("max-height",i+"vw"));var o=localStorage.getItem("hide-icons");if(null!=o&&o.length>0){o=JSON.parse(o);for(let e=0;e<o.length;e++){var l=o[e];$("a."+l).hide(),$("a."+l).css("display","none"),$("img."+l).hide(),$("img."+l).css("display","none"),$("svg."+l).hide(),$("svg."+l).css("display","none")}0==$($("td.info_button")[0]).children(":visible").length&&($("td.info_button").hide(),$("th.info_button").hide())}"true"==localStorage.getItem("hide-flags")&&($("td.countries").hide(),$("th.countries").hide())}if(null==localStorage.getItem("suggest-lang")){var r=navigator.language||navigator.userLanguage;const e=["ar","de","el","es","fr","hi","hu","id","it","jp","pl","pt","ru","tr","uk","zh"];for(let t=0;t<e.length;t++){var d=e[t];r.indexOf(d)>-1&&$.ajax({async:!1,type:"GET",url:"/langdisplay/"+r,success:function(e){var t=e;$("#appendLang").append(r+" ("+t+")"),$("#langToChange").val(r),$("#switchLangModal").modal("show"),localStorage.setItem("suggest-lang",!0)}})}}window.location.href.indexOf("/home")>-1&&$("#nfs-top-home").parent().addClass("nfs-top-item-active");var p=localStorage.getItem("expandable-width");if(null!=p&&($("#offcanvas").removeClass("w-25"),$("#offcanvas").removeClass("w-35"),$("#offcanvas").removeClass("w-50"),$("#offcanvas").addClass("w-"+p)),"true"==localStorage.getItem("all-games")&&($("#all-games-group").attr("hidden",!1),$(".single-serie").attr("hidden",!0)),null!=localStorage.getItem("custom-playlist")){var c=JSON.parse(localStorage.getItem("custom-playlist")),u=JSON.stringify(c);localStorage.setItem("custom-playlist",u),$("#playlistContent").val(u)}else $("#customPlaylistSubmit").prop("disabled",!0),$("#customPlaylistSubmit").parent().parent().attr("data-toggle","tooltip"),$("#customPlaylistSubmit").parent().parent().attr("data-placement","top"),$("#customPlaylistSubmit").parent().parent().attr("data-bs-original-title",$("#customPlaylistSubmit").attr("data-tooltip")),$("#customPlaylistSubmit").parent().parent().tooltip();var f=localStorage.getItem("video-rendering-stuff");null!=f&&"true"!=f||$(document).find(".play_icon").each((function(e){$(this).removeAttr("data-bs-target"),$(this).removeAttr("data-bs-toggle")})),$("#searchStuff").tooltip({trigger:"focus",title:$("#searchStuff").attr("data-tooltip")}),$("#filter_games_menu").val(""),$("#filter_games_menu_pinned").val(""),$('[data-toggle="tooltip"]').tooltip();var m=window.location.pathname;m.indexOf("custom/playlist")>-1?$("#customPlaylistSubmit").parent().parent().addClass("nfs-top-item-active"):$(document).find("a[href='"+m+"']").each((function(e){if($(this).hasClass("nav-link"))$(this).parent().addClass("nfs-top-item-active");else{if($(this).hasClass("genreLink"))return;$(this).addClass("active"),$("#all-games-group").attr("hidden")?$(this).parent().parent().parent().parent().find("button").click():"true"==localStorage.getItem("static-leftmenu")?$($("a.active")[1]).parent().parent().parent().animate({scrollTop:$(this).offset().top+-5*$(this).height()+-1*$("#search-games-bar").height()},0):$($("a.active")[1]).parent().parent().parent().parent().parent().parent().animate({scrollTop:$(this).offset().top+-5*$(this).height()+-1*$("div.offcanvas-header").height()},0)}}))}$(document).ready((function(){function e(e){$("#playlistModePlayer").html(""),e&&$("#playlist_progress").empty()}function t(e){e.target.playVideo()}function a(e){0===e.data&&s(current_id+1)}function s(n){e(!1),n>=0&&(current_id=Number(n));var o=0;$("#playlist_progress").is(":empty")&&$("table.playlist_table").find("tr:visible:not(.subgroup-separator):not(.visually-hidden)").each((function(){var e=$(this).find("td.band").html(),t=$(this).find("td.songtitle").html();e=$.trim(e).replaceAll("\n","").replaceAll("<span>","").replaceAll("</span>","").replaceAll("> ",">"),t=$.trim(t).replaceAll("\n","").replaceAll("<span>","").replaceAll("</span>","").replaceAll("> ",">");var a=$(this).find("img.play_icon");if(a.length>0){var s=a.attr("data-tagvideo").replace("https://www.youtube.com/embed/",""),n=$('<tr id="'+o+'" rel="'+s+'"></tr>');n.append('<td class="playlist_play_it"><img class="img-responsive-playlist-modal-icon pointable" src="/images/znakwodny.webp"></td>'),n.append('<td class="playlist_row">'+e+" - "+t+"</td>"),n.append('<td class="playlist_disable_song"><img class="img-responsive-playlist-modal-icon pointable" src="/images/fullres/trashcan_big.webp"></td>'),$("#playlist_progress").append(n),o++}}));var l=[];if(i=0,$("#playlist_progress tr").each((function(){l[i]=$(this).attr("rel"),i++})),current_id>=i&&(current_id=0),$("#playlist_progress tr:nth-child("+(current_id+1)+")").hasClass("disabled"))0==current_id&&$("#errorThing").parent().fadeIn(500,(function(){setTimeout((function(){$("#errorThing").parent().fadeOut(500)}),3e3)})),s(current_id+1);else{$("#playlistModePlayer").html('<iframe id="player" allow="autoplay" type="text/html" src="https://www.youtube.com/embed/'+l[current_id]+'?enablejsapi=1&autoplay=1&autohide=0&theme=light&wmode=transparent" frameborder="0"></iframe>');new YT.Player("player",{events:{onReady:t,onStateChange:a}});var r=$("#playlist_progress tr:nth-child("+(current_id+1)+")"),d=$("#playlist_progress");$("#playlist_progress").animate({scrollTop:d.scrollTop()+r.position().top-d.height()/2+r.height()/2},300);var p=$("#playlist_progress tr");p.removeClass("current"),p.find("td.playlist_disable_song").show(),p.find("td.playlist_play_it").show(),p.find("td.playlist_row").attr("colspan",1);var c=$("#playlist_progress tr:nth-child("+(current_id+1)+")");c.addClass("current"),c.find("td.playlist_disable_song").hide(),c.find("td.playlist_play_it").hide(),c.find("td.playlist_row").attr("colspan",3)}}function n(e){var t=localStorage.getItem("custom-playlist");null==t?t=[]:null!=t&&(t=JSON.parse(t)),t.push(e);var a=JSON.stringify(t);localStorage.setItem("custom-playlist",a),$("#playlistContent").val(a),$("#customPlaylistSubmit").prop("disabled",!1),$("#customPlaylistSubmit").parent().parent().tooltip("dispose"),$("#successAddToCustomPlaylist").parent().fadeIn(500,(function(){setTimeout((function(){$("#successAddToCustomPlaylist").parent().fadeOut(500)}),3e3)}))}function o(e,t,a){$("#getAllUsages").attr("href","/song/"+Number(e)),$.ajax({async:!1,type:"GET",url:"/songInfo/"+e,success:function(e){var s,n=JSON.parse(e);if($("#officialArtist").append(document.createTextNode(n.officialArtist)),$("#officialTitle").append(document.createTextNode(n.officialTitle)),0!=n.composers.length)for(let e=0;e<n.composers.length;e++)$(n.composers[e]).insertAfter($("#composers"));if(0!=n.subcomposers.length)for(let e=0;e<n.subcomposers.length;e++)$(n.subcomposers[e]).insertAfter($("#subcomposers"));if(0!=n.remixers.length)for(let e=0;e<n.remixers.length;e++)$(n.remixers[e]).insertAfter($("#remixers"));if(0!=n.featArtists.length)for(let e=0;e<n.featArtists.length;e++)$(n.featArtists[e]).insertAfter($("#featArtists"));if(0!=n.genres.length){$("#genres").parent().find(">:not(#genres)").each((function(){$(this).remove()}));for(let e=n.genres.length-1;e>=0;e--)$(n.genres[e]).insertAfter($("#genres"))}(null!=n.youtube&&$(n.youtube).insertAfter("#externalLinks"),null!=t)&&((s=$("<span>")).append(t),$(s).insertAfter("#additionalInfo"));(null!=n.spotify&&$(n.spotify).insertAfter("#externalLinks"),null!=n.deezer&&$(n.deezer).insertAfter("#externalLinks"),null!=n.itunes&&$(n.itunes).insertAfter("#externalLinks"),null!=n.tidal&&$(n.tidal).insertAfter("#externalLinks"),null!=n.soundcloud&&$(n.soundcloud).insertAfter("#externalLinks"),null!=a)&&((s=$("<span>")).append(a),$(s).insertAfter("#filename"));null!=n.baseSongId&&($(n.baseSongId).insertAfter("#baseSong"),$("#baseSongDiv").css("display","")),$("#infoSongModal").modal("show")},error:function(e){console.log("e2"),console.log(e)}})}function l(e){var t=e.target.previousElementSibling.href;if(null!=currentlyPlayedSpotify&&($(currentlyPlayedSpotify.nextElementSibling).css("display","none"),$(currentlyPlayedSpotify).css("display",""),spotifyController.togglePlay()),!(e.target.src.indexOf("play")>-1))return $(e.target.previousElementSibling).css("display",""),$(e.target).css("display","none"),spotifyController.togglePlay(),void(currentlyPlayedSpotify=null);if($(e.target.nextElementSibling).css("display",""),$(e.target).css("display","none"),currentlyPlayedSpotify=e.target,null!=spotifyController)spotifyController.loadUri(t),spotifyController.play();else{var a=$("#embed-iframe");0==$("#embed-iframe").length&&(a=$('<div id="embed-iframe"></div>')),$(e.target.parentElement).append(a),$(a).css("display","none");const s=a[0],n={width:"0",height:"0",uri:t},i=e=>{spotifyController=e,e.addListener("ready",(()=>{console.log("The Embed has initialized "+(new Date).toString())})),e.addListener("playback_update",(e=>{0!=e.data.duration&&e.data.duration==e.data.position&&currentlyPlayedSpotify&&($(currentlyPlayedSpotify.nextElementSibling).css("display","none"),$(currentlyPlayedSpotify).css("display",""),currentlyPlayedSpotify=null)}))};spotifyApi.createController(s,n,i),spotifyController.play()}}function r(e,t){if(null!=currentlyPlayedSpotify&&spotifyController.togglePlay(),currentlyPlayedSpotify=e,null!=spotifyController)spotifyController.loadUri(e),spotifyController.play();else{var a=$("#embed-iframe");0==$("#embed-iframe").length&&(a=$('<div id="embed-iframe"></div>')),$("tr[data-songsubgroup-id="+t+"]").append(a);const s=a[0],n={width:"0%",height:"0",uri:e},i=e=>{spotifyController=e,e.addListener("ready",(()=>{console.log("The Embed has initialized "+(new Date).toString())})),e.addListener("playback_update",(e=>{0!=e.data.duration&&e.data.duration==e.data.position&&currentlyPlayedSpotify&&(currentlyPlayedSpotify=null)}))};spotifyApi.createController(s,n,i),spotifyController.play()}}function d(e){var t=$("#playlist_progress").parent().offset().top,a=t+$("#playlist_progress").parent().height(),s=$(e).offset().top;return s+2*$(e).height()<=a&&s>=t}doLoadingCrap(),$(document).find("td.countries").each((function(){var e=$(this).children(),t=[];for(let s=0;s<e.length;s++){var a=e[s].src;-1==t.indexOf(a)?t.push(a):$(e[s]).remove()}})),$(".play_icon").on("click",(function(){var e=!1;if(window.matchMedia("(pointer: coarse)").matches){let e=$(this).attr("src").replace("znakwodny","znakwodny2");$(this).attr("src",e)}if(null!=lastActivePlayButton){let t=lastActivePlayButton.attr("src").replace("znakwodny2","znakwodny");lastActivePlayButton.attr("src",t),0==$(this).attr("data-tagVideo").localeCompare(lastActivePlayButton.attr("data-tagVideo"))&&(e=!0),lastActivePlayButton=$(this)}else lastActivePlayButton=$(this);var t=localStorage.getItem("video-rendering-stuff");if(null==t||"true"==t){var a=$("#listen-music");if(0!=a.length&&a.remove(),e){let e=$(this).attr("src").replace("znakwodny2","znakwodny");$(this).attr("src",e),lastActivePlayButton=null}else{var s=$(this).attr("data-tagvideo"),n=$(this).next().next(),i=n.text(),o=!1;"instrumental"==n.attr("data-lyricsState")?(i='<h5 style="word-wrap: break-word;">'+n.attr("data-instrumental")+"</h5>",o=!0):""!=i&&"null"!=i||(i='<h5 style="word-wrap: break-word;">'+n.attr("data-noLyrics")+"</h5>",o=!0);var l=$(this).parent().parent().parent(),r=$('<tr id="listen-music">'),d=l.parent().parent().find("th:visible").length,p=$('<td colspan="'+d+'" id="listen-music-id">'),c=$('<iframe id="ytrow" frameborder="0">'),u=$('<div id="lyrics_main">'),f=$('<div style="clear:both;">'),m=$("<p>");o&&"ontouchstart"in window&&(u.width("20%"),c.width("76%")),c.attr("src",s+"?autoplay=1&amp;autohide=0&amp;theme=light&amp;wmode=transparent"),c.attr("allow","autoplay"),m.append(i),u.append(m),p.append(c),p.append(u),p.append(f),r.append(p),r.insertAfter(l)}}else{$("#lyricsCollapse").empty();var h=$(this).next().text();"null"==h||""==h?($("#showLyrics").text("Lyrics not found"),$("#showLyrics").prop("disabled",!0)):"0.0"==h?($("#showLyrics").text("This is instrumental, no lyrics"),$("#showLyrics").prop("disabled",!0)):($("#lyricsCollapse").append(h),$("#showLyrics").prop("disabled",!1))}})),$(".play_icon").mouseover((function(){window.matchMedia("(pointer: coarse)").matches||$(this).attr("src",$(this).attr("src").replace("znakwodny","znakwodny2"))})).mouseout((function(){window.matchMedia("(pointer: coarse)").matches||$(this).attr("src",$(this).attr("src").replace("znakwodny2","znakwodny"))})),$("#filter_songs").on("keyup",(function(){var e=$(this).val().toLowerCase();e.length>3?$("table").find("tr:has(td):not(.subgroup-separator)").filter((function(){$(this).find("td.band").text().toLowerCase().indexOf(e)>-1||$(this).find("td.songtitle").text().toLowerCase().indexOf(e)>-1?$(this).show():$(this).hide()})):$("table").find("tr:has(td)").filter((function(){$(this).show()}))})),$("#videoModal").on("show.bs.modal",(function(e){var t=e.relatedTarget;$(t).attr("src",$(t).attr("src").replace("znakwodny2","znakwodny")),baseVideoSrc=$(t).attr("data-tagVideo")+"?autoplay=1&amp;modestbranding=1&amp;showinfo=0",$("#lyricsCollapse").empty();var a=$(t).next().text();"null"==a||""==a?($("#showLyrics").text($("#showLyrics").attr("data-lyricsMissing")),$("#showLyrics").prop("disabled",!0)):"0.0"==a?($("#showLyrics").text($("#showLyrics").attr("data-instrumental")),$("#showLyrics").prop("disabled",!0)):($("#lyricsCollapse").append(a),$("#showLyrics").prop("disabled",!1)),$("#video").attr("src",baseVideoSrc)})),$("#videoModal").on("hide.bs.modal",(function(e){$("#video").attr("src","")})),$("#disqusModal").on("show.bs.modal",(function(e){var t,a;if("newDisqusLink"==e.relatedTarget.id?(t=window.location.href,a="racingsoundtracks"):(t=$("#disqusModal").attr("data-disqusLink"),a="nfssoundtrack"),0==$("#disqus_thread").children().length){var s=document.createElement("script");s.innerHTML="var disqus_config = function () {     this.page.url = '"+t+"';  }; (function () {  var d = document, s = d.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://"+a+".disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date());(d.head || d.body).appendChild(s);})();";var n=document.createElement("noscript");n.innerHTML='Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>',$("#disqus_thread").append(s),$("#disqus_thread").append(n)}else DISQUS.reset({reload:!0,config:function(){this.forum=a,this.page.url=t}})})),$("#playlistModeModal").on("show.bs.modal",(function(e){s(0)})),$("#playlistModeModal").on("shown.bs.modal",(function(e){var t=$("#playlistModePlayer"),a=t.parent().next(),s=t.children().first();$(a).css("max-height",s.height()),$(a).css("overflow-y","auto")})),$("#playlistModeModal").on("hide.bs.modal",(function(t){e(!0)})),$(document).on("click","td.playlist_play_it",(function(){$(this).parent().hasClass("disabled")||s(this.parentNode.id)})),$(document).on("click","td.playlist_disable_song",(function(){$(this).parent().hasClass("disabled")?$(this).parent().removeClass("disabled"):$(this).parent().addClass("disabled")})),$(document).on("click","img.add-to-custom-playlist",(function(){var e=$(this).parent().parent();n($(e).attr("data-songSubgroup-id"))})),$(document).on("click","button.justHideAlert",(function(e){e.preventDefault(),$(this).parent().parent().fadeOut(100)})),$(document).on("click","img.info-about-song",(function(){if($(this).parent().hasClass("info_button")){var e=$(this).parent().parent();$(this).tooltip("dispose");var t=$(e).attr("data-song_id"),a=$(e).find("td.infowarn>span"),s=$(e).find("td.infowarn>span"),n=null,i=null;a.length>0&&(n=a.attr("aria-label")),s.length>0&&(i=s.text()),o(t,n,i)}else{var l=$(this).next();$(this).tooltip("dispose"),o(t=$(l).attr("data-song_id"),null,null)}})),$(document).on("click","svg.report-bug",(function(){if($(this).parent().hasClass("info_button")){var e=$(this).parent().parent().clone();$(this).tooltip("dispose");var t=$(e).attr("data-songsubgroup-id");$("#affected-songsubgroup").val(t),$("#source-url").val(window.location.href),e.find(".info_button").remove(),$("#affected-songsubgroup").prev().remove(),e.insertBefore($("#affected-songsubgroup")),$("#reportProblemModal").modal("show")}})),$(document).on("click","#reportProblemMobile",(function(){var e=$(this).attr("data-songsubgroup-id"),t=$("tbody").find("tr[data-songSubgroup-id='"+e+"']").clone();$("#affected-songsubgroup").val(e),$("#source-url").val(window.location.href),$("#affected-songsubgroup").prev().remove(),t.insertBefore($("#affected-songsubgroup")),$("#mobile_context").removeClass("show").hide(),$("#reportProblemModal").modal("show")})),$(document).on("click","#reportGeneralProblem",(function(){$("#affected-songsubgroup").val(-1),$("#source-url").val(window.location.href),$("#reportProblemModal").modal("show"),$("#problem-type").val("OTHER-PROBLEM").change()})),$(document).on("touchstart","td:not(.infowarn)",(function(e){"ontouchstart"in window&&$(document).find("div.tooltip").hide()})),$(document).on("touchstart","#dynamic_bg",(function(e){"ontouchstart"in window&&$(document).find("div.tooltip").hide()})),$(document).on("touchstart","td.infowarn",(function(e){e.preventDefault(),$(this).children().tooltip("show")})),$(document).on("touchstart","#moreDiv",(function(e){0==e.target.id.localeCompare("moreDiv")&&$("#moreDiv").hasClass("show")&&$("#moreDiv").removeClass("show").hide()})),$(document).on("touchstart","svg.context_menu_thing",(function(e){e.preventDefault();var t=$(this).parent().parent(),a=$(t).attr("data-song_id"),s=$(t).attr("data-songsubgroup-id"),n=$(t).find("a.a-external-music-link");$("#mobileAddToPlaylist").attr("data-songsubgroup-id",s),$("#reportProblemMobile").attr("data-songsubgroup-id",s),$("#mobileRemoveFromPlaylist").attr("data-songsubgroup-id",s),$("#mobileShowSongInfo").attr("data-song_id",a),$("#playSpotifySample").attr("data-songsubgroup-id",s);var i=$(t).find("td.infowarn>a"),o=null;i.length>0&&(o=i.attr("aria-label"),$("#mobileShowSongInfo").attr("infoLabel",o));var l=$(t).find("a.externalYT"),r=null,d=null,p=null,c=null,u=null;for(let e=0;e<n.length;e++){var f=$(n[e]);f.attr("href").indexOf("spotify:")>-1?r=f:f.attr("href").indexOf("deezer")>-1?d=f:f.attr("href").indexOf("music.apple.com")>-1?p=f:f.attr("href").indexOf("tidal.com")>-1?c=f:f.attr("href").indexOf("soundcloud.com")>-1&&(u=f)}if(l.length>0?$("#mobileExternalYoutube").attr("href",l.attr("href")):$("#mobileExternalYoutube").css("display","none"),null!=r?($("#mobileLaunchSpotify").attr("href",r.attr("href")),$("#playSpotifySample").css("display","")):($("#mobileLaunchSpotify").css("display","none"),$("#playSpotifySample").css("display","none")),null!=d?$("#mobileLaunchDeezer").attr("href",d.attr("href")):$("#mobileLaunchDeezer").css("display","none"),null!=p?$("#mobileLaunchItunes").attr("href",p.attr("href")):$("#mobileLaunchItunes").css("display","none"),null!=c?$("#mobileLaunchTidal").attr("href",c.attr("href")):$("#mobileLaunchTidal").css("display","none"),null!=u?$("#mobileLaunchSoundCloud").attr("href",u.attr("href")):$("#mobileLaunchSoundCloud").css("display","none"),!$("#mobile_context").hasClass("show")){var m=e.originalEvent.touches[0].pageY+.02*window.innerHeight,h=e.originalEvent.touches[0].pageX+15;return $("#mobile_context").css({position:"absolute",display:"block",top:m,left:h}).addClass("show"),!1}$("#mobile_context").removeClass("show").hide(),$("#mobileLaunchSpotify").css("display",""),$("#playSpotifySample").css("display",""),$("#mobileLaunchItunes").css("display",""),$("#mobileLaunchDeezer").css("display",""),$("#mobileLaunchTidal").css("display",""),$("#mobileLaunchSoundCloud").css("display",""),$("#mobileExternalYoutube").css("display",""),window.location.href.indexOf("/game/")>-1&&($("#newDisqusLinkToOpen").css("display",""),$("#newDisqusLinkToOpen").attr("data-bs-toggle","modal"),$("#newDisqusLinkToOpen").attr("data-bs-target","#disqusModal"))})),$(document).on("touchstart","#newDisqusLinkToOpen",(function(e){})),$(document).on("touchstart","tr",(function(e){$("#mobile_context").removeClass("show").hide(),$("#mobileLaunchSpotify").css("display",""),$("#playSpotifySample").css("display",""),$("#mobileLaunchItunes").css("display",""),$("#mobileLaunchDeezer").css("display",""),$("#mobileLaunchTidal").css("display",""),$("#mobileLaunchSoundCloud").css("display","")})),$("#mobileAddToPlaylist").on("click",(function(e){n($(this).attr("data-songSubgroup-id")),$("#mobile_context").removeClass("show").hide(),$("#mobileLaunchSpotify").css("display",""),$("#playSpotifySample").css("display",""),$("#mobileLaunchItunes").css("display",""),$("#mobileLaunchDeezer").css("display",""),$("#mobileLaunchTidal").css("display",""),$("#mobileLaunchSoundCloud").css("display","")})),$("#mobileShowSongInfo").on("click",(function(e){o($(this).attr("data-song_id"),$(this).attr("infoLabel")),$("#mobile_context").removeClass("show").hide(),$("#mobileLaunchSpotify").css("display",""),$("#playSpotifySample").css("display",""),$("#mobileLaunchItunes").css("display",""),$("#mobileLaunchDeezer").css("display",""),$("#mobileLaunchTidal").css("display",""),$("#mobileLaunchSoundCloud").css("display","")})),$("#playSpotifySample").on("click",(function(e){var t=$("#mobileLaunchSpotify")[0].href,a=Number($(e.target).attr("data-songsubgroup-id"));if($("#spotify-iframeapi-script").length>0)r(t,a);else{var s=document.createElement("script");s.src="https://open.spotify.com/embed/iframe-api/v1",document.head.appendChild(s),setTimeout((function(){r(t,a)}),1e3)}$("#mobile_context").removeClass("show").hide(),$("#mobileLaunchSpotify").css("display",""),$("#playSpotifySample").css("display",""),$("#mobileLaunchItunes").css("display",""),$("#mobileLaunchDeezer").css("display",""),$("#mobileLaunchTidal").css("display",""),$("#mobileLaunchSoundCloud").css("display","")})),$("a.single_action").on("click",(function(e){$("#mobile_context").removeClass("show").hide(),$("#mobileLaunchSpotify").css("display",""),$("#playSpotifySample").css("display",""),$("#mobileLaunchItunes").css("display",""),$("#mobileLaunchDeezer").css("display",""),$("#mobileLaunchTidal").css("display",""),$("#mobileLaunchSoundCloud").css("display","")})),$("#pin-menu").on("click",(function(e){$("#closeInHeader").click(),$("#offcanvas").removeClass("offcanvas");var t=$("#offcanvas").find(".offcanvas-header")[0];$(t).css("display","none"),$("#offcanvasSpan").removeAttr("data-bs-toggle"),$("#offcanvasSpan").css("display","none"),$("#unpin-menu").css("display",""),$("#unpin-menu").parent().css("display","flex"),$("#filter_games_menu_pinned").css("display","none"),$("#filter_games_menu").css("display",""),localStorage.setItem("static-leftmenu",!0);var a=$("#offcanvas").next().next(),s=localStorage.getItem("content-width");if(null!=s&&(a.addClass("col"),a.removeClass("col-sm-"+s)),$("#leftMenuTodaySong").css("display",""),"true"==localStorage.getItem("all-games")){if($("#all-games-div").css("overflow-y","scroll"),$("#unpin-menu").prev().css("display",""),3==$("div.centerKeeper").length)$("#all-games-div").css("max-height",$("div.centerKeeper").first().height()+"px");else{var n=Math.floor(($("header").height()+$("div.real-page-content").height())/window.innerHeight*100/10);n<=144&&n>=36?$("#all-games-div").css("max-height",n+"vw"):n>144?$("#all-games-div").css("max-height","144vw"):n<36&&$("#all-games-div").css("max-height",$("div.parentTabs").height()+"px")}$($("a.active")[1]).parent().parent().parent().animate({scrollTop:$($("a.active")[1]).offset().top+-5*$($("a.active")[1]).height()+-2*$("#search-games-bar").height()},0)}else $("#unpin-menu").prev().prev().css("display","")})),$("#unpin-menu").on("click",(function(e){$("#offcanvas").addClass("offcanvas");var t=$("#offcanvas").find(".offcanvas-header")[0];$(t).css("display",""),$("#offcanvasSpan").attr("data-bs-toggle","offcanvas"),$("#offcanvasSpan").css("display",""),$("#unpin-menu").css("display","none"),$("#unpin-menu").parent().css("display",""),$("#unpin-menu").prev().css("display","none"),$("#unpin-menu").prev().prev().css("display","none"),$("#filter_games_menu_pinned").css("display",""),$("#filter_games_menu").css("display","none"),localStorage.setItem("static-leftmenu",!1);var a=$("#offcanvas").next().next(),s=localStorage.getItem("content-width");null!=s&&(a.addClass("col-sm-"+s),a.removeClass("col")),$("#leftMenuTodaySong").css("display","none"),"true"==localStorage.getItem("all-games")?($("#all-games-div").css("overflow-y",""),$("#all-games-div").css("max-height",""),$("#pin-menu").prev().css("display",""),$("#pin-menu").prev().prev().css("display","none"),$($("a.active")[1]).parent().parent().parent().parent().parent().parent().animate({scrollTop:$($("a.active")[1]).offset().top+-3*$($("a.active")[1]).height()+-1*$("div.offcanvas-header").height()},0)):($("#pin-menu").prev().css("display","none"),$("#pin-menu").prev().prev().css("display",""))})),$("button.grouped-games").on("click",(function(e){localStorage.setItem("all-games",!1),$(this).prev().css("display",""),$("button.grouped-games").css("display","none"),$("#all-games-group").attr("hidden",!0),$(".single-serie").attr("hidden",!1)})),$("button.alphabetical-games").on("click",(function(e){localStorage.setItem("all-games",!0),$("button.alphabetical-games").css("display","none"),$(this).next().css("display",""),$("#all-games-group").attr("hidden",!1),$(".single-serie").attr("hidden",!0)})),$(document).on("click","img.30-player",(function(e){if($("#spotify-iframeapi-script").length>0)l(e);else{var t=document.createElement("script");t.src="https://open.spotify.com/embed/iframe-api/v1",document.head.appendChild(t),setTimeout((function(){l(e)}),1e3)}})),window.onSpotifyIframeApiReady=e=>{console.log("loaded"),spotifyApi=e},$(document).keydown((function(e){if($("#playlistModeModal").is(":visible")){var t=$("tr.current")[0];if(40==e.keyCode){for(;null==a;){(s=$(t).next()).hasClass("disabled")?t=s:a=s}if(null==a)return;(n=$(a).find("td.playlist_play_it")).length>0&&(n.click(),d(a)||$("#playlist_progress").parent().animate({scrollTop:$("#playlist_progress").parent().scrollTop()+10*a.height()},700))}else if(38==e.keyCode){for(var a;null==a;){var s;(s=$(t).prev()).hasClass("disabled")?t=s:a=s}if(null==a)return;var n;(n=$(a).find("td.playlist_play_it")).length>0&&(n.click(),d(a)||$("#playlist_progress").parent().animate({scrollTop:$("#playlist_progress").parent().scrollTop()+-1*a.height()*10},700))}}}))}));