var currentBg=0;$(document).ready((function(){if(changeStuffForDynamicTheme(),$("#hide-icons").multiselect({includeSelectAllOption:!0,templates:{button:'<button type="button" class="form-select multiselect dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><span class="multiselect-selected-text"></span></button>'}}),null!=localStorage.getItem("lang")){var e=localStorage.getItem("lang"),t=$(document).find("img[data-countryval='"+e+"']").first()[0].src;$("#dropdownCountryImg")[0].src=t}$(document).on("click","#save-preferences",(function(){let e=new Object;e.expandableWidth=$("#expandable-width").val(),e.scrollingStuff=$("#scrolling-stuff").prop("checked"),e.staticLeftMenu=$("#static-leftmenu").prop("checked"),e.iconsSize=$("#icons-size").val(),e.contentWidth=$("#content-width").val(),e.videoRenderingStuff=$("#video-rendering-stuff").prop("checked"),e.hideIcons=JSON.stringify($("#hide-icons").val()),e.hideFlags=$("#hide-flags").prop("checked"),e.allGames=$("#all-games").prop("checked"),e.composersFlagsOnly=$("#composers-flags-only").prop("checked"),e.lang=$("#lang-select").val(),localStorage.setItem("expandable-width",e.expandableWidth),localStorage.setItem("scrolling-stuff",e.scrollingStuff),localStorage.setItem("static-leftmenu",e.staticLeftMenu),localStorage.setItem("icons-size",e.iconsSize),localStorage.setItem("content-width",e.contentWidth),localStorage.setItem("video-rendering-stuff",e.videoRenderingStuff),localStorage.setItem("hide-icons",e.hideIcons),localStorage.setItem("hide-flags",e.hideFlags),localStorage.setItem("all-games",e.allGames),localStorage.setItem("composers-flags-only",e.composersFlagsOnly),localStorage.setItem("lang",$("#lang-select").val()),$.ajax({url:"/preferences",type:"POST",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){console.log("saved preferences to session")},error:function(){console.log("something wrong in session")}}),window.location.toString().indexOf("?lang")>-1?window.location.search="?lang="+$("#lang-select").val():window.location=window.location+"?lang="+$("#lang-select").val()})),$(document).on("click","#openPreferences",(function(){var e=localStorage.getItem("scrolling-stuff");null!=e&&$("#scrolling-stuff").prop("checked",JSON.parse(e));var t=localStorage.getItem("video-rendering-stuff");null!=t&&$("#video-rendering-stuff").prop("checked",JSON.parse(t));var a=localStorage.getItem("hide-flags");null!=a&&$("#hide-flags").prop("checked",JSON.parse(a));var o=localStorage.getItem("static-leftmenu");null!=o&&$("#static-leftmenu").prop("checked",JSON.parse(o));var l=localStorage.getItem("expandable-width");null!=l&&$("#expandable-width").val(l);var n=localStorage.getItem("icons-size");null!=n&&$("#icons-size").val(n);var c=localStorage.getItem("content-width");null!=c&&$("#content-width").val(c);var r=localStorage.getItem("lang");null!=r&&$("#lang-select").val(r);var s=JSON.parse(localStorage.getItem("hide-icons"));null!=s&&$("#hide-icons").multiselect("select",s);var i=localStorage.getItem("all-games");null!=i&&$("#all-games").prop("checked",JSON.parse(i));var g=localStorage.getItem("composers-flags-only");null!=g&&$("#composers-flags-only").prop("checked",JSON.parse(g))})),$("#nightModeSwitch").click((function(e){e.preventDefault(),localStorage.setItem("dark-mode",!$(this).prev().prop("checked")),$(this).prev().click()})),$("#sunlight").click((function(e){e.preventDefault(),localStorage.setItem("dark-mode",!0),localStorage.removeItem("dynamic-bg"),$("#moonlight").css("display",""),$("#sunlight").css("display","none"),changeStuffForDarkMode(),changeStuffForDynamicTheme(),"undefined"!=typeof DISQUS&&DISQUS.reset({reload:!0})})),$("#moonlight").click((function(e){e.preventDefault(),localStorage.setItem("dark-mode",!1),localStorage.removeItem("dynamic-bg"),$("#moonlight").css("display","none"),$("#sunlight").css("display",""),changeStuffForDarkMode(),changeStuffForDynamicTheme(),"undefined"!=typeof DISQUS&&DISQUS.reset({reload:!0})})),$("#flexSwitchCheckDefault").change((function(e){localStorage.setItem("dark-mode",$(this).prop("checked")),changeStuffForDarkMode(),"undefined"!=typeof DISQUS&&DISQUS.reset({reload:!0})})),$(document).on("click","#dynamic_bg",(function(e){e.preventDefault(),0==(currentBg=localStorage.hasOwnProperty("dynamic-bg")?(Number(localStorage.getItem("dynamic-bg-index"))+1)%6:(currentBg+1)%6)?(localStorage.removeItem("dynamic-bg"),localStorage.setItem("dynamic-bg-index",0),changeStuffForDarkMode(),changeStuffForDynamicTheme()):$.ajax({async:!1,type:"GET",url:"/dynamictheme/"+currentBg,success:function(e){localStorage.setItem("dynamic-bg",e),localStorage.setItem("dynamic-bg-index",currentBg);var t=JSON.parse(e);changeStuffForDarkMode(t.nightMode),changeStuffForDynamicTheme()}})})),$(document).on("click","a.translate-link",(function(){var e=$(this).children().first().attr("data-countryval");localStorage.setItem("lang",e),window.location.toString().indexOf("?lang")>-1?window.location.search="?lang="+e:window.location=window.location+"?lang="+e}))}));