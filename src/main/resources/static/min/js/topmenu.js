var currentBg=0;$(document).ready(function(){changeStuffForDynamicTheme(),$("#hide-icons").multiselect({includeSelectAllOption:!0,templates:{button:'<button type="button" class="form-select multiselect dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><span class="multiselect-selected-text"></span></button>'}}),$(document).on("click","#save-preferences",function(){localStorage.setItem("expandable-width",$("#expandable-width").val()),localStorage.setItem("scrolling-stuff",$("#scrolling-stuff").prop("checked")),localStorage.setItem("static-leftmenu",$("#static-leftmenu").prop("checked")),localStorage.setItem("icons-size",$("#icons-size").val()),localStorage.setItem("content-width",$("#content-width").val()),localStorage.setItem("video-rendering-stuff",$("#video-rendering-stuff").prop("checked")),localStorage.setItem("hide-icons",JSON.stringify($("#hide-icons").val())),localStorage.setItem("hide-flags",$("#hide-flags").prop("checked")),-1<window.location.toString().indexOf("?lang")?window.location.search="?lang="+$("#lang-select").val():window.location=window.location+"?lang="+$("#lang-select").val()}),$("#nightModeSwitch").click(function(e){e.preventDefault(),localStorage.setItem("dark-mode",!$(this).prev().prop("checked")),$(this).prev().click()}),$("#sunlight").click(function(e){e.preventDefault(),localStorage.setItem("dark-mode",!0),localStorage.removeItem("dynamic-bg"),$("#moonlight").css("display",""),$("#sunlight").css("display","none"),changeStuffForDarkMode(),changeStuffForDynamicTheme(),"undefined"!=typeof DISQUS&&DISQUS.reset({reload:!0})}),$("#moonlight").click(function(e){e.preventDefault(),localStorage.setItem("dark-mode",!1),localStorage.removeItem("dynamic-bg"),$("#moonlight").css("display","none"),$("#sunlight").css("display",""),changeStuffForDarkMode(),changeStuffForDynamicTheme(),"undefined"!=typeof DISQUS&&DISQUS.reset({reload:!0})}),$("#flexSwitchCheckDefault").change(function(e){localStorage.setItem("dark-mode",$(this).prop("checked")),changeStuffForDarkMode(),"undefined"!=typeof DISQUS&&DISQUS.reset({reload:!0})}),$(document).on("click","#dynamic_bg",function(e){e.preventDefault(),0==(currentBg=localStorage.hasOwnProperty("dynamic-bg")?(Number(localStorage.getItem("dynamic-bg-index"))+1)%5:(currentBg+1)%5)?(localStorage.removeItem("dynamic-bg"),localStorage.setItem("dynamic-bg-index",0),changeStuffForDarkMode(),changeStuffForDynamicTheme()):$.ajax({async:!1,type:"GET",url:"/dynamictheme/"+currentBg,success:function(e){localStorage.setItem("dynamic-bg",e),localStorage.setItem("dynamic-bg-index",currentBg);e=JSON.parse(e);changeStuffForDarkMode(e.nightMode),changeStuffForDynamicTheme()}})})});